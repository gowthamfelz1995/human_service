<template>
    <template if:true={showListTemplate}>
    <lightning-card title="Choose Assessment Template" icon-name="action:add_file">
        <template for:each={templateList} for:item="assessment" for:index="index">
            <div  key={assessment.Name} class="slds-m-around_medium slds-p-left_x-large">
            <lightning-input
            key={assessment.Name}
            label={assessment.Name}
            data-value={index}
            checked ={assessment.isChecked}
            type="checkbox"
            onchange={handleCheckboxChange}
        ></lightning-input>
    </div>
        </template>
        <div class="slds-align_absolute-center">
            <span class="slds-p-around_xx-small">
            <lightning-button
                label="Cancel"
                variant="neutral"
                onclick={handleCancel}
            ></lightning-button>
            </span>
            <span class="slds-p-around_xx-small">
            <lightning-button
                label="Next"
                variant="brand"
                onclick={handleNext}
            ></lightning-button>
            </span>
        </div>
        </lightning-card>
    </template>
    <template if:false={showListTemplate}>
        <lightning-card title={assessmentName} icon-name="action:log_event">
            <span class="slds-p-left_small">
            <lightning-button
                    label="Calculate Total Score"
                    onclick={calculateTotalScore}
                ></lightning-button>
            </span>
            <span class="slds-p-left_small slds-text-color_success">TOTAL SCORE : {totalMarks}</span>
            <template  for:each={questionList} for:item="question" for:index="index">
                <div class="slds-p-around_large" key={question}>
                <span key={question.questions.Id} class="slds-text-heading_small">{question.questions.Name}</span>
                <template if:true={question.isPickList}>
                    <lightning-layout vertical-align="center" multiple-rows="true">
                        <lightning-layout-item padding="around-small" size="10">
                    <lightning-combobox key={question.pickListValues} data-name={index} name={index} label=""
                        placeholder="Choose one.." options={question.pickListValues} onchange={handleChange}>
                    </lightning-combobox>
                    </lightning-layout-item>
                    <lightning-layout-item padding="around-small" size="2">
                        SCORE : {question.questions.AG_Score__c}
                    </lightning-layout-item>
                    </lightning-layout>
                </template>
                <template if:true={question.isText}>
                    <lightning-layout vertical-align="center" multiple-rows="true">
                    <lightning-layout-item padding="around-small" size="10">
                    <lightning-input type="text" label={question.questions.Name} data-name={index} value={textValue} onchange={handleChange}></lightning-input> 
                   </lightning-layout-item>
                   <lightning-layout-item padding="around-small" size="2">
                    SCORE : {question.questions.AG_Score__c}
                       </lightning-layout-item>
                   </lightning-layout>
                    
                    
                </template>
                <template if:true={question.isTextArea}>
                    <lightning-layout vertical-align="center" multiple-rows="true">
                        <lightning-layout-item padding="around-small" size="10">
                    <lightning-textarea name="input3" label="Information" data-name={index} placeholder="type here..." onchange={handleChange}></lightning-textarea>
                    </lightning-layout-item>
                    <lightning-layout-item padding="around-small" size="2">
                        SCORE : {question.questions.AG_Score__c}
                           </lightning-layout-item>
                    </lightning-layout>
                 </template>
                 <template if:true={question.isPhone}>
                    <lightning-layout vertical-align="center" multiple-rows="true">
                        <lightning-layout-item padding="around-small" size="10">
                 <lightning-input type="tel" label="Phone Number" name="phone2" data-name={index} placeholder="phone" onchange={handleChange}></lightning-input>
                 </lightning-layout-item>
                 <lightning-layout-item padding="around-small" size="2">
                    SCORE : {question.questions.AG_Score__c}
                       </lightning-layout-item>
                 </lightning-layout>
                </template>
                <template if:true={question.isNumber}>
                    <lightning-layout vertical-align="center" multiple-rows="true">
                        <lightning-layout-item padding="around-small" size="10">
                <lightning-input type="number" name="input1" label="Enter a number" data-name={index} onchange={handleChange}></lightning-input>
                </lightning-layout-item>
                <lightning-layout-item padding="around-small" size="2">
                    SCORE : {question.questions.AG_Score__c}
                       </lightning-layout-item>
                </lightning-layout>
                </template>
            </div>
            </template>
            <template if:true={showSaveBtn}>
                <div class="slds-align_absolute-center">
                    <span class="slds-p-around_xx-small">
                <lightning-button
                label="Back"
                variant="neutral"
                onclick={handleback}
            ></lightning-button>
              </span>
              <span class="slds-p-around_xx-small">
                <lightning-button
                    label="Save"
                    onclick={saveAssessment}
                    variant="brand"
                ></lightning-button>
            </span>
        </div>
        </template>
        </lightning-card>
            </template>
</template>